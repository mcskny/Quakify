{"ast":null,"code":"import React,{useRef,useEffect,useState}from\"react\";import*as maptilersdk from\"@maptiler/sdk\";import\"@maptiler/sdk/dist/maptiler-sdk.css\";import\"./map.css\";import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MAPTILER_API_KEY=\"MTCoW3CI3wRY7K9lPnAI\";const getDateNDaysAgo=n=>{const d=new Date();d.setDate(d.getDate()-n);return d;};const isDateInRange=(quakeDateStr,fromDate,toDate)=>{const[day,month,year]=quakeDateStr.split('/');const quakeDate=new Date(\"\".concat(year,\"-\").concat(month,\"-\").concat(day));return quakeDate>=fromDate&&quakeDate<=toDate;};const getCityCountry=async coordinates=>{if(!coordinates)return\"\";const[lon,lat]=coordinates.split(',').map(c=>c.trim());try{const response=await fetch(\"https://api.maptiler.com/geocoding/\".concat(lon,\",\").concat(lat,\".json?key=\").concat(MAPTILER_API_KEY,\"&language=en\"));const data=await response.json();if(data.features&&data.features.length>0){var _context$find,_context$find2;const context=data.features[0].context||[];let city=((_context$find=context.find(c=>c.id.startsWith(\"place\")))===null||_context$find===void 0?void 0:_context$find.text)||\"\";let country=((_context$find2=context.find(c=>c.id.startsWith(\"country\")))===null||_context$find2===void 0?void 0:_context$find2.text)||\"\";city=city.replace(/[^A-Za-z0-9 ,.-]/g,\"\");country=country.replace(/[^A-Za-z0-9 ,.-]/g,\"\");if(city&&country)return\"\".concat(city,\", \").concat(country);let placeName=data.features[0].place_name||\"\";placeName=placeName.replace(/[^A-Za-z0-9 ,.-]/g,\"\");return placeName;}return\"\";}catch{return\"\";}};export default function Map(_ref){let{showMap,dateFilter,onQuakeSelectMobile}=_ref;const[quak,setQuak]=useState([]);const[markers,setMarkers]=useState([]);const[cityMap,setCityMap]=useState({});const[popup,setPopup]=useState({visible:false,x:0,y:0,quake:null});useEffect(()=>{const fetchData=async()=>{try{const response=await axios.get('https://quakify.mcskn.com/backend/api.php');setQuak(response.data);}catch(error){console.error('Error fetching data:',error);}};fetchData();},[]);useEffect(()=>{const fetchCities=async()=>{const map={};await Promise.all(quak.map(async marker=>{if(marker.coordinates){map[marker.id]=await getCityCountry(marker.coordinates);}}));setCityMap(map);};if(quak.length>0)fetchCities();},[quak]);useEffect(()=>{const closePopup=e=>{var _document$querySelect;if(popup.visible&&e.target&&!((_document$querySelect=document.querySelector(\".quake-popup\"))!==null&&_document$querySelect!==void 0&&_document$querySelect.contains(e.target))){setPopup(p=>({...p,visible:false}));}};const closePopupOnScroll=()=>{if(popup.visible)setPopup(p=>({...p,visible:false}));};const closePopupOnWheel=()=>{if(popup.visible)setPopup(p=>({...p,visible:false}));};if(popup.visible){window.addEventListener(\"mousedown\",closePopup);window.addEventListener(\"scroll\",closePopupOnScroll,true);if(mapContainer.current){mapContainer.current.addEventListener(\"scroll\",closePopupOnScroll,true);mapContainer.current.addEventListener(\"wheel\",closePopupOnWheel,true);}document.addEventListener(\"scroll\",closePopupOnScroll,true);document.addEventListener(\"wheel\",closePopupOnWheel,true);}return()=>{window.removeEventListener(\"mousedown\",closePopup);window.removeEventListener(\"scroll\",closePopupOnScroll,true);if(mapContainer.current){mapContainer.current.removeEventListener(\"scroll\",closePopupOnScroll,true);mapContainer.current.removeEventListener(\"wheel\",closePopupOnWheel,true);}document.removeEventListener(\"scroll\",closePopupOnScroll,true);document.removeEventListener(\"wheel\",closePopupOnWheel,true);};},[popup.visible]);const mapContainer=useRef(null);const ist={lng:28.97709,lat:41.011467};const[zoom]=useState(1.5);maptilersdk.config.apiKey=MAPTILER_API_KEY;useEffect(()=>{const map=new maptilersdk.Map({container:mapContainer.current,style:\"https://api.maptiler.com/maps/b89836a1-3239-4824-bf17-5aef32dc5664/style.json?key=MTCoW3CI3wRY7K9lPnAI\",center:[ist.lng,ist.lat],zoom:zoom});// Tarih filtresine göre depremleri filtrele\nlet filteredQuak=quak;const now=new Date();if(dateFilter===\"week\"){const weekAgo=getDateNDaysAgo(7);filteredQuak=quak.filter(q=>isDateInRange(q.date,weekAgo,now));}else if(dateFilter===\"month\"){const monthAgo=getDateNDaysAgo(30);filteredQuak=quak.filter(q=>isDateInRange(q.date,monthAgo,now));}else if(dateFilter===\"year\"){const yearAgo=getDateNDaysAgo(365);filteredQuak=quak.filter(q=>isDateInRange(q.date,yearAgo,now));}const newMarkers=filteredQuak.map(marker=>{const child=document.createElement(\"div\");child.className=\"marker\";child.textContent=marker.magnitude;child.style.textAlign=\"center\";child.style.margin=\"auto\";child.style.paddingTop=22+\"px\";child.style.color=\"white\";child.style.fontFamily=\"inter\";child.style.fontSize=\"15px\";child.style.alignItems=\"center\";if(marker.magnitude<5){setMarkerStyle(child,\"https://quakify.mcskn.com/Point.png\",20);}else if(marker.magnitude>=5&&marker.magnitude<7){setMarkerStyle(child,\"https://quakify.mcskn.com/Point.png\",45,13,\"12px\");}else{setMarkerStyle(child,\"https://quakify.mcskn.com/Point.png\",65);}child.addEventListener(\"mouseover\",function(){document.getElementById(\"info\").innerHTML=(cityMap[marker.id]||\"Yükleniyor...\")+\"    /    \"+marker.magnitude+\"   /   \"+marker.depth+\"km\";});child.addEventListener(\"mouseleave\",function(){document.getElementById(\"info\").innerHTML=\"\";});child.addEventListener(\"click\",function(e){e.stopPropagation();// Ekran genişliğini kontrol et\nif(window.innerWidth<=640){// Mobil boyut (sm breakpoint)\n// Mobilde popup yerine üst bileşene bilgiyi gönder\nif(onQuakeSelectMobile){onQuakeSelectMobile({city:cityMap[marker.id]||\"Yükleniyor...\",magnitude:marker.magnitude,depth:marker.depth,date:marker.date,time:marker.time,// Diğer gerekli bilgileri de ekleyebilirsiniz, örneğin koordinatlar\ncoordinates:marker.coordinates});}}else{// Mobil değilse mevcut popup mantığı\nsetPopup({visible:true,x:e.clientX,y:e.clientY,quake:{city:cityMap[marker.id]||\"Yükleniyor...\",magnitude:marker.magnitude,depth:marker.depth,date:marker.date,time:marker.time}});}});const newMarker=new maptilersdk.Marker({element:child}).setLngLat(marker.coordinates.split(\",\")).addTo(map);return newMarker;});setMarkers(newMarkers);return()=>{map.remove();};},[ist.lng,ist.lat,zoom,quak,cityMap,dateFilter,onQuakeSelectMobile]);const setMarkerStyle=function(child,backgroundImage,width){let paddingTop=arguments.length>3&&arguments[3]!==undefined?arguments[3]:22;let fontSize=arguments.length>4&&arguments[4]!==undefined?arguments[4]:\"15px\";child.style.backgroundImage=\"url(\".concat(backgroundImage,\")\");child.style.width=\"\".concat(width,\"px\");child.style.height=\"\".concat(width,\"px\");child.style.paddingTop=\"\".concat(paddingTop,\"px\");child.style.fontSize=fontSize;};return/*#__PURE__*/_jsxs(\"div\",{className:\"map-wrap\",style:{position:\"relative\"},children:[/*#__PURE__*/_jsx(\"div\",{id:\"info\",className:\"w-60 left-2 h-8  text-white inter-light mt-1 fixed z-20\"}),/*#__PURE__*/_jsx(\"div\",{id:\"main-content\",ref:mapContainer,className:\"map hidden sm:block\"}),popup.visible&&popup.quake&&/*#__PURE__*/_jsx(\"div\",{className:\"quake-popup backdrop-blur bg-opacity-20 hidden sm:block\",style:{position:\"fixed\",left:popup.x+15,top:popup.y+15,width:350,height:120,borderRadius:20,background:\"rgba(30,30,30,0.97)\",color:\"#fff\",zIndex:9999,boxShadow:\"0 4px 24px #0008\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",animation:\"popupIn 0.25s cubic-bezier(.68,-0.55,.27,1.55)\",userSelect:\"none\",pointerEvents:\"auto\"},onMouseDown:e=>e.stopPropagation(),children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,fontSize:16,marginBottom:4},children:popup.quake.city}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Mag: \",/*#__PURE__*/_jsx(\"b\",{children:popup.quake.magnitude})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Depth: \",/*#__PURE__*/_jsxs(\"b\",{children:[popup.quake.depth,\" km\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:12,marginTop:2},children:[popup.quake.date,\" \",popup.quake.time]})]})}),/*#__PURE__*/_jsx(\"style\",{children:\"\\n        @keyframes popupIn {\\n          0% { opacity: 0; transform: scale(0.7) translateY(20px);}\\n          100% { opacity: 1; transform: scale(1) translateY(0);}\\n        }\\n        \"})]});}","map":{"version":3,"names":["React","useRef","useEffect","useState","maptilersdk","axios","jsx","_jsx","jsxs","_jsxs","MAPTILER_API_KEY","getDateNDaysAgo","n","d","Date","setDate","getDate","isDateInRange","quakeDateStr","fromDate","toDate","day","month","year","split","quakeDate","concat","getCityCountry","coordinates","lon","lat","map","c","trim","response","fetch","data","json","features","length","_context$find","_context$find2","context","city","find","id","startsWith","text","country","replace","placeName","place_name","Map","_ref","showMap","dateFilter","onQuakeSelectMobile","quak","setQuak","markers","setMarkers","cityMap","setCityMap","popup","setPopup","visible","x","y","quake","fetchData","get","error","console","fetchCities","Promise","all","marker","closePopup","e","_document$querySelect","target","document","querySelector","contains","p","closePopupOnScroll","closePopupOnWheel","window","addEventListener","mapContainer","current","removeEventListener","ist","lng","zoom","config","apiKey","container","style","center","filteredQuak","now","weekAgo","filter","q","date","monthAgo","yearAgo","newMarkers","child","createElement","className","textContent","magnitude","textAlign","margin","paddingTop","color","fontFamily","fontSize","alignItems","setMarkerStyle","getElementById","innerHTML","depth","stopPropagation","innerWidth","time","clientX","clientY","newMarker","Marker","element","setLngLat","addTo","remove","backgroundImage","width","arguments","undefined","height","position","children","ref","left","top","borderRadius","background","zIndex","boxShadow","display","flexDirection","justifyContent","animation","userSelect","pointerEvents","onMouseDown","fontWeight","marginBottom","marginTop"],"sources":["C:/Users/bain/Desktop/Quakify-main/quakifyapp/src/components/Map.jsx"],"sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\nimport * as maptilersdk from \"@maptiler/sdk\";\nimport \"@maptiler/sdk/dist/maptiler-sdk.css\";\nimport \"./map.css\";\nimport axios from 'axios';\n\nconst MAPTILER_API_KEY = \"MTCoW3CI3wRY7K9lPnAI\";\n\nconst getDateNDaysAgo = (n) => {\n  const d = new Date();\n  d.setDate(d.getDate() - n);\n  return d;\n};\n\nconst isDateInRange = (quakeDateStr, fromDate, toDate) => {\n  const [day, month, year] = quakeDateStr.split('/');\n  const quakeDate = new Date(`${year}-${month}-${day}`);\n  return quakeDate >= fromDate && quakeDate <= toDate;\n};\n\nconst getCityCountry = async (coordinates) => {\n  if (!coordinates) return \"\";\n  const [lon, lat] = coordinates.split(',').map(c => c.trim());\n  try {\n    const response = await fetch(\n      `https://api.maptiler.com/geocoding/${lon},${lat}.json?key=${MAPTILER_API_KEY}&language=en`\n    );\n    const data = await response.json();\n    if (data.features && data.features.length > 0) {\n      const context = data.features[0].context || [];\n      let city = context.find(c => c.id.startsWith(\"place\"))?.text || \"\";\n      let country = context.find(c => c.id.startsWith(\"country\"))?.text || \"\";\n      city = city.replace(/[^A-Za-z0-9 ,.-]/g, \"\");\n      country = country.replace(/[^A-Za-z0-9 ,.-]/g, \"\");\n      if (city && country) return `${city}, ${country}`;\n      let placeName = data.features[0].place_name || \"\";\n      placeName = placeName.replace(/[^A-Za-z0-9 ,.-]/g, \"\");\n      return placeName;\n    }\n    return \"\";\n  } catch {\n    return \"\";\n  }\n};\n\nexport default function Map({ showMap, dateFilter, onQuakeSelectMobile }) {\n  const [quak, setQuak] = useState([]);\n  const [markers, setMarkers] = useState([]);\n  const [cityMap, setCityMap] = useState({});\n  const [popup, setPopup] = useState({ visible: false, x: 0, y: 0, quake: null });\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await axios.get('https://quakify.mcskn.com/backend/api.php');\n        setQuak(response.data);\n      } catch (error) {\n        console.error('Error fetching data:', error);\n      }\n    };\n    fetchData();\n  }, []);\n\n  useEffect(() => {\n    const fetchCities = async () => {\n      const map = {};\n      await Promise.all(\n        quak.map(async (marker) => {\n          if (marker.coordinates) {\n            map[marker.id] = await getCityCountry(marker.coordinates);\n          }\n        })\n      );\n      setCityMap(map);\n    };\n    if (quak.length > 0) fetchCities();\n  }, [quak]);\n\n  useEffect(() => {\n    const closePopup = (e) => {\n      if (\n        popup.visible &&\n        e.target &&\n        !document.querySelector(\".quake-popup\")?.contains(e.target)\n      ) {\n        setPopup(p => ({ ...p, visible: false }));\n      }\n    };\n\n    const closePopupOnScroll = () => {\n      if (popup.visible) setPopup(p => ({ ...p, visible: false }));\n    };\n\n    const closePopupOnWheel = () => {\n      if (popup.visible) setPopup(p => ({ ...p, visible: false }));\n    };\n\n    if (popup.visible) {\n      window.addEventListener(\"mousedown\", closePopup);\n      window.addEventListener(\"scroll\", closePopupOnScroll, true);\n      if (mapContainer.current) {\n        mapContainer.current.addEventListener(\"scroll\", closePopupOnScroll, true);\n        mapContainer.current.addEventListener(\"wheel\", closePopupOnWheel, true); \n      }\n      document.addEventListener(\"scroll\", closePopupOnScroll, true);\n      document.addEventListener(\"wheel\", closePopupOnWheel, true);\n    }\n    return () => {\n      window.removeEventListener(\"mousedown\", closePopup);\n      window.removeEventListener(\"scroll\", closePopupOnScroll, true);\n      if (mapContainer.current) {\n        mapContainer.current.removeEventListener(\"scroll\", closePopupOnScroll, true);\n        mapContainer.current.removeEventListener(\"wheel\", closePopupOnWheel, true);\n      }\n      document.removeEventListener(\"scroll\", closePopupOnScroll, true);\n      document.removeEventListener(\"wheel\", closePopupOnWheel, true); \n    };\n  }, [popup.visible]);\n\n  const mapContainer = useRef(null);  \n  const ist = { lng: 28.97709, lat: 41.011467 };\n  const [zoom] = useState(1.5);\n\n  maptilersdk.config.apiKey = MAPTILER_API_KEY;\n\n  useEffect(() => {\n    const map = new maptilersdk.Map({\n      container: mapContainer.current,\n      style: \"https://api.maptiler.com/maps/b89836a1-3239-4824-bf17-5aef32dc5664/style.json?key=MTCoW3CI3wRY7K9lPnAI\",\n      center: [ist.lng, ist.lat],\n      zoom: zoom,\n    });\n\n    // Tarih filtresine göre depremleri filtrele\n    let filteredQuak = quak;\n    const now = new Date();\n    if (dateFilter === \"week\") {\n      const weekAgo = getDateNDaysAgo(7);\n      filteredQuak = quak.filter(q => isDateInRange(q.date, weekAgo, now));\n    } else if (dateFilter === \"month\") {\n      const monthAgo = getDateNDaysAgo(30);\n      filteredQuak = quak.filter(q => isDateInRange(q.date, monthAgo, now));\n    } else if (dateFilter === \"year\") {\n      const yearAgo = getDateNDaysAgo(365);\n      filteredQuak = quak.filter(q => isDateInRange(q.date, yearAgo, now));\n    }\n\n    const newMarkers = filteredQuak.map(marker => {\n      const child = document.createElement(\"div\");\n      child.className = \"marker\"; \n      child.textContent = marker.magnitude;\n      child.style.textAlign = \"center\";\n      child.style.margin = \"auto\";\n      child.style.paddingTop = 22 + \"px\";\n      child.style.color = \"white\";\n      child.style.fontFamily = \"inter\";\n      child.style.fontSize = \"15px\";\n      child.style.alignItems = \"center\";\n      \n      if (marker.magnitude < 5) {\n        setMarkerStyle(child, \"https://quakify.mcskn.com/Point.png\", 20);\n      } else if (marker.magnitude >= 5 && marker.magnitude < 7) {\n        setMarkerStyle(child, \"https://quakify.mcskn.com/Point.png\", 45, 13, \"12px\");\n      } else {\n        setMarkerStyle(child, \"https://quakify.mcskn.com/Point.png\", 65);\n      }\n      \n      child.addEventListener(\"mouseover\", function () {\n        document.getElementById(\"info\").innerHTML =\n          (cityMap[marker.id] || \"Yükleniyor...\") +\n          \"    /    \" +\n          marker.magnitude +\n          \"   /   \" +\n          marker.depth +\n          \"km\";\n      });\n      \n      child.addEventListener(\"mouseleave\", function () {\n        document.getElementById(\"info\").innerHTML = \"\";\n      });\n\n      child.addEventListener(\"click\", function (e) {\n        e.stopPropagation();\n        // Ekran genişliğini kontrol et\n        if (window.innerWidth <= 640) { // Mobil boyut (sm breakpoint)\n          // Mobilde popup yerine üst bileşene bilgiyi gönder\n          if (onQuakeSelectMobile) {\n            onQuakeSelectMobile({\n              city: cityMap[marker.id] || \"Yükleniyor...\",\n              magnitude: marker.magnitude,\n              depth: marker.depth,\n              date: marker.date,\n              time: marker.time,\n              // Diğer gerekli bilgileri de ekleyebilirsiniz, örneğin koordinatlar\n              coordinates: marker.coordinates\n            });\n          }\n        } else {\n          // Mobil değilse mevcut popup mantığı\n          setPopup({\n            visible: true,\n            x: e.clientX,\n            y: e.clientY,\n            quake: {\n              city: cityMap[marker.id] || \"Yükleniyor...\",\n              magnitude: marker.magnitude,\n              depth: marker.depth,\n              date: marker.date,\n              time: marker.time,\n            }\n          });\n        }\n      });\n\n      const newMarker = new maptilersdk.Marker({ element: child })\n        .setLngLat(marker.coordinates.split(\",\"))\n        .addTo(map);\n      \n      return newMarker;\n    });\n\n    setMarkers(newMarkers);\n\n    return () => {\n      map.remove(); \n    };\n  }, [ist.lng, ist.lat, zoom, quak, cityMap, dateFilter, onQuakeSelectMobile]);\n\n  const setMarkerStyle = (child, backgroundImage, width, paddingTop = 22, fontSize = \"15px\") => {\n    child.style.backgroundImage = `url(${backgroundImage})`;\n    child.style.width = `${width}px`;\n    child.style.height = `${width}px`;\n    child.style.paddingTop = `${paddingTop}px`;\n    child.style.fontSize = fontSize;\n  };\n\n  return (\n    <div className=\"map-wrap\" style={{ position: \"relative\" }}>\n      <div id=\"info\" className=\"w-60 left-2 h-8  text-white inter-light mt-1 fixed z-20\"></div>\n      <div\n        id=\"main-content\"\n        ref={mapContainer}\n        className=\"map hidden sm:block\"\n      />\n      {popup.visible && popup.quake && (\n        <div\n          className=\"quake-popup backdrop-blur bg-opacity-20 hidden sm:block\"\n          style={{\n            position: \"fixed\",\n            left: popup.x + 15,\n            top: popup.y + 15,\n            width: 350,\n            height: 120,\n            borderRadius: 20,\n            background: \"rgba(30,30,30,0.97)\",\n            color: \"#fff\",\n            zIndex: 9999,\n            boxShadow: \"0 4px 24px #0008\",\n            display: \"flex\",\n            flexDirection: \"column\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            animation: \"popupIn 0.25s cubic-bezier(.68,-0.55,.27,1.55)\",\n            userSelect: \"none\",\n            pointerEvents: \"auto\"\n          }}\n          onMouseDown={e => e.stopPropagation()}\n        >\n          <div>\n          <div style={{ fontWeight: 600, fontSize: 16, marginBottom: 4 }}>{popup.quake.city}</div>\n          <div>Mag: <b>{popup.quake.magnitude}</b></div>\n          <div>Depth: <b>{popup.quake.depth} km</b></div>\n          <div style={{ fontSize: 12, marginTop: 2 }}>{popup.quake.date} {popup.quake.time}</div>\n          </div>\n        </div>\n      )}\n      <style>\n        {`\n        @keyframes popupIn {\n          0% { opacity: 0; transform: scale(0.7) translateY(20px);}\n          100% { opacity: 1; transform: scale(1) translateY(0);}\n        }\n        `}\n      </style>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}