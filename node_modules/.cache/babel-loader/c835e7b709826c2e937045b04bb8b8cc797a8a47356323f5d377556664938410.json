{"ast":null,"code":"import React,{useRef,useEffect,useState}from\"react\";import*as maptilersdk from\"@maptiler/sdk\";import\"@maptiler/sdk/dist/maptiler-sdk.css\";import\"./map.css\";import axios from'axios';import geojson from'./quakes.json';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Map(){const[quak,setQuak]=useState([]);const[markers,setMarkers]=useState([]);useEffect(()=>{const fetchData=async()=>{try{const response=await axios.get('https://quakify.mcskn.com/backend/api.php');setQuak(response.data);}catch(error){console.error('Error fetching data:',error);}};fetchData();},[]);const mapContainer=useRef(null);const ist={lng:28.97709,lat:41.011467};const[zoom]=useState(1.5);maptilersdk.config.apiKey=\"MTCoW3CI3wRY7K9lPnAI\";useEffect(()=>{const map=new maptilersdk.Map({container:mapContainer.current,style:\"https://api.maptiler.com/maps/b89836a1-3239-4824-bf17-5aef32dc5664/style.json?key=MTCoW3CI3wRY7K9lPnAI\",center:[ist.lng,ist.lat],zoom:zoom});const newMarkers=quak.map(marker=>{const child=document.createElement(\"div\");child.className=\"marker\";child.textContent=marker.magnitude;child.style.textAlign=\"center\";child.style.margin=\"auto\";child.style.color=\"white\";child.style.fontFamily=\"inter\";child.style.alignItems=\"center\";child.style.transition=\"transform 0.2s, width 0.2s, height 0.2s, font-size 0.2s\";// Otomatik boyut: büyüklük + zoom'a göre\nconst baseSize=20;// minimum marker boyutu\nconst maxSize=65;// maksimum marker boyutu\nconst minMag=0;const maxMag=8;// Marker büyüklüğü, magnitude'a göre lineer ölçeklenir\nlet size=baseSize+(Math.min(marker.magnitude,maxMag)-minMag)/(maxMag-minMag)*(maxSize-baseSize);// Zoom'a göre marker büyüklüğünü ayarla\nconst mapZoom=map.getZoom?map.getZoom():zoom;const zoomFactor=Math.max(1,(mapZoom-1)*0.5+1);// zoom arttıkça büyüsün\nsize=size*zoomFactor;setMarkerStyle(child,\"https://quakify.mcskn.com/Point.png\",size,size/2.2,\"\".concat(Math.max(12,size/3),\"px\"));// Marker büyüsün/küçülsün: zoom değişince güncelle\nmap.on(\"zoom\",()=>{const currentZoom=map.getZoom();const dynamicZoomFactor=Math.max(1,(currentZoom-1)*0.5+1);const dynamicSize=baseSize+(Math.min(marker.magnitude,maxMag)-minMag)/(maxMag-minMag)*(maxSize-baseSize)*dynamicZoomFactor;setMarkerStyle(child,\"https://quakify.mcskn.com/Point.png\",dynamicSize,dynamicSize/2.2,\"\".concat(Math.max(12,dynamicSize/3),\"px\"));});child.addEventListener(\"mouseover\",function(){document.getElementById(\"info\").innerHTML=marker.city+\"    /    \"+marker.magnitude+\"   /   \"+marker.depth+\"km\";child.style.transform=\"scale(1.3)\";});child.addEventListener(\"mouseleave\",function(){document.getElementById(\"info\").innerHTML=\"\";child.style.transform=\"scale(1)\";});const newMarker=new maptilersdk.Marker({element:child}).setLngLat(marker.coordinates.split(\",\")).addTo(map);return newMarker;});setMarkers(newMarkers);return()=>{map.remove();};},[ist.lng,ist.lat,zoom,quak]);const setMarkerStyle=function(child,backgroundImage,width){let paddingTop=arguments.length>3&&arguments[3]!==undefined?arguments[3]:22;let fontSize=arguments.length>4&&arguments[4]!==undefined?arguments[4]:\"15px\";child.style.backgroundImage=\"url(\".concat(backgroundImage,\")\");child.style.width=\"\".concat(width,\"px\");child.style.height=\"\".concat(width,\"px\");child.style.paddingTop=\"\".concat(paddingTop,\"px\");child.style.fontSize=fontSize;};return/*#__PURE__*/_jsxs(\"div\",{className:\"map-wrap\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"info\",className:\"w-60 left-2 h-8  text-white inter-light mt-1 fixed z-20\"}),/*#__PURE__*/_jsx(\"div\",{ref:mapContainer,className:\"map\"})]});}","map":{"version":3,"names":["React","useRef","useEffect","useState","maptilersdk","axios","geojson","jsx","_jsx","jsxs","_jsxs","Map","quak","setQuak","markers","setMarkers","fetchData","response","get","data","error","console","mapContainer","ist","lng","lat","zoom","config","apiKey","map","container","current","style","center","newMarkers","marker","child","document","createElement","className","textContent","magnitude","textAlign","margin","color","fontFamily","alignItems","transition","baseSize","maxSize","minMag","maxMag","size","Math","min","mapZoom","getZoom","zoomFactor","max","setMarkerStyle","concat","on","currentZoom","dynamicZoomFactor","dynamicSize","addEventListener","getElementById","innerHTML","city","depth","transform","newMarker","Marker","element","setLngLat","coordinates","split","addTo","remove","backgroundImage","width","paddingTop","arguments","length","undefined","fontSize","height","children","id","ref"],"sources":["C:/Users/bain/Desktop/Quakify-main/quakifyapp/src/components/Map.jsx"],"sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\nimport * as maptilersdk from \"@maptiler/sdk\";\nimport \"@maptiler/sdk/dist/maptiler-sdk.css\";\nimport \"./map.css\";\nimport axios from 'axios';\nimport geojson from './quakes.json';\n\nexport default function Map() {\n  const [quak, setQuak] = useState([]);\n  const [markers, setMarkers] = useState([]);\n  \n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await axios.get('https://quakify.mcskn.com/backend/api.php');\n        setQuak(response.data);\n      } catch (error) {\n        console.error('Error fetching data:', error);\n      }\n    };\n    fetchData();\n  }, []);\n  \n  const mapContainer = useRef(null);  \n  const ist = { lng: 28.97709, lat: 41.011467 };\n  const [zoom] = useState(1.5);\n\n  maptilersdk.config.apiKey = \"MTCoW3CI3wRY7K9lPnAI\";\n\n  useEffect(() => {\n    const map = new maptilersdk.Map({\n      container: mapContainer.current,\n      style: \"https://api.maptiler.com/maps/b89836a1-3239-4824-bf17-5aef32dc5664/style.json?key=MTCoW3CI3wRY7K9lPnAI\",\n      center: [ist.lng, ist.lat],\n      zoom: zoom,\n    });\n    \n    const newMarkers = quak.map(marker => {\n      const child = document.createElement(\"div\");\n      child.className = \"marker\"; \n      child.textContent = marker.magnitude;\n      child.style.textAlign = \"center\";\n      child.style.margin = \"auto\";\n      child.style.color = \"white\";\n      child.style.fontFamily = \"inter\";\n      child.style.alignItems = \"center\";\n      child.style.transition = \"transform 0.2s, width 0.2s, height 0.2s, font-size 0.2s\";\n\n      // Otomatik boyut: büyüklük + zoom'a göre\n      const baseSize = 20; // minimum marker boyutu\n      const maxSize = 65;  // maksimum marker boyutu\n      const minMag = 0;\n      const maxMag = 8;\n      // Marker büyüklüğü, magnitude'a göre lineer ölçeklenir\n      let size = baseSize + ((Math.min(marker.magnitude, maxMag) - minMag) / (maxMag - minMag)) * (maxSize - baseSize);\n\n      // Zoom'a göre marker büyüklüğünü ayarla\n      const mapZoom = map.getZoom ? map.getZoom() : zoom;\n      const zoomFactor = Math.max(1, (mapZoom - 1) * 0.5 + 1); // zoom arttıkça büyüsün\n      size = size * zoomFactor;\n\n      setMarkerStyle(child, \"https://quakify.mcskn.com/Point.png\", size, size / 2.2, `${Math.max(12, size / 3)}px`);\n\n      // Marker büyüsün/küçülsün: zoom değişince güncelle\n      map.on(\"zoom\", () => {\n        const currentZoom = map.getZoom();\n        const dynamicZoomFactor = Math.max(1, (currentZoom - 1) * 0.5 + 1);\n        const dynamicSize = baseSize + ((Math.min(marker.magnitude, maxMag) - minMag) / (maxMag - minMag)) * (maxSize - baseSize) * dynamicZoomFactor;\n        setMarkerStyle(child, \"https://quakify.mcskn.com/Point.png\", dynamicSize, dynamicSize / 2.2, `${Math.max(12, dynamicSize / 3)}px`);\n      });\n\n      child.addEventListener(\"mouseover\", function () {\n        document.getElementById(\"info\").innerHTML =\n          marker.city +\n          \"    /    \" +\n          marker.magnitude +\n          \"   /   \" +\n          marker.depth +\n          \"km\";\n        child.style.transform = \"scale(1.3)\";\n      });\n      \n      child.addEventListener(\"mouseleave\", function () {\n        document.getElementById(\"info\").innerHTML = \"\";\n        child.style.transform = \"scale(1)\";\n      });\n\n      const newMarker = new maptilersdk.Marker({ element: child })\n        .setLngLat(marker.coordinates.split(\",\"))\n        .addTo(map);\n      \n      return newMarker;\n    });\n\n    setMarkers(newMarkers);\n\n    return () => {\n      map.remove(); \n    };\n  }, [ist.lng, ist.lat, zoom, quak]);\n\n  const setMarkerStyle = (child, backgroundImage, width, paddingTop = 22, fontSize = \"15px\") => {\n    child.style.backgroundImage = `url(${backgroundImage})`;\n    child.style.width = `${width}px`;\n    child.style.height = `${width}px`;\n    child.style.paddingTop = `${paddingTop}px`;\n    child.style.fontSize = fontSize;\n  };\n\n  return (\n    <div className=\"map-wrap\">\n      <div id=\"info\" className=\"w-60 left-2 h-8  text-white inter-light mt-1 fixed z-20\"></div>\n      <div ref={mapContainer} className=\"map\" />\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}