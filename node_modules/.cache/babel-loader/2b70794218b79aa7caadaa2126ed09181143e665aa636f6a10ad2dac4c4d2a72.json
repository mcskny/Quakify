{"ast":null,"code":"import React,{useRef,useEffect,useState}from\"react\";import*as maptilersdk from\"@maptiler/sdk\";import\"@maptiler/sdk/dist/maptiler-sdk.css\";import\"./map.css\";import axios from'axios';import geojson from'./quakes.json';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Map(){const[quak,setQuak]=useState([]);const[markers,setMarkers]=useState([]);useEffect(()=>{const fetchData=async()=>{try{const response=await axios.get('https://quakify.mcskn.com/backend/api.php');setQuak(response.data);}catch(error){console.error('Error fetching data:',error);}};fetchData();},[]);const mapContainer=useRef(null);const ist={lng:28.97709,lat:41.011467};const[zoom]=useState(1.5);maptilersdk.config.apiKey=\"MTCoW3CI3wRY7K9lPnAI\";useEffect(()=>{const map=new maptilersdk.Map({container:mapContainer.current,style:\"https://api.maptiler.com/maps/b89836a1-3239-4824-bf17-5aef32dc5664/style.json?key=MTCoW3CI3wRY7K9lPnAI\",center:[ist.lng,ist.lat],zoom:zoom});const newMarkers=quak.map(marker=>{// Kapsayıcı div\nconst container=document.createElement(\"div\");container.style.display=\"flex\";container.style.justifyContent=\"center\";container.style.alignItems=\"center\";container.style.position=\"relative\";// Dinamik boyutlar\nconst minSize=20;const maxSize=65;const minMag=3;const maxMag=8;const mag=Math.max(minMag,Math.min(marker.magnitude,maxMag));const ringSize=minSize+(mag-minMag)/(maxMag-minMag)*(maxSize-minSize);const ringThickness=Math.max(4,ringSize*0.18)-1;// Halkanın kalınlığı\nconst circleSize=ringSize-ringThickness*2-1;// Ring (dış halka)\nconst ring=document.createElement(\"div\");ring.style.width=\"\".concat(ringSize,\"px\");ring.style.height=\"\".concat(ringSize,\"px\");ring.style.border=\"\".concat(ringThickness,\"px solid #fff\");ring.style.borderRadius=\"50%\";ring.style.position=\"relative\";ring.style.display=\"flex\";ring.style.justifyContent=\"center\";ring.style.alignItems=\"center\";ring.style.boxSizing=\"border-box\";ring.style.background=\"transparent\";// Circle (iç kırmızı daire)\nconst circle=document.createElement(\"div\");circle.style.width=\"\".concat(circleSize,\"px\");circle.style.height=\"\".concat(circleSize,\"px\");circle.style.background=\"#FF3131\";circle.style.borderRadius=\"50%\";circle.style.position=\"absolute\";circle.style.top=\"50%\";circle.style.left=\"50%\";circle.style.transform=\"translate(-50%, -50%)\";circle.style.display=\"flex\";circle.style.justifyContent=\"center\";circle.style.alignItems=\"center\";circle.style.color=\"white\";circle.style.fontWeight=\"bold\";circle.style.fontFamily=\"inter\";circle.style.fontSize=\"\".concat(Math.max(10,circleSize*0.4),\"px\");circle.textContent=marker.magnitude;// Hover eventleri circle'a ekle\ncircle.addEventListener(\"mouseover\",function(){document.getElementById(\"info\").innerHTML=marker.city+\"        \"+marker.magnitude+\"   /   \"+marker.depth+\"km\";});circle.addEventListener(\"mouseleave\",function(){document.getElementById(\"info\").innerHTML=\"\";});// Yapıyı birleştir\nring.appendChild(circle);container.appendChild(ring);const newMarker=new maptilersdk.Marker({element:container}).setLngLat(marker.coordinates.split(\",\")).addTo(map);return newMarker;});setMarkers(newMarkers);return()=>{map.remove();};},[ist.lng,ist.lat,zoom,quak]);const setMarkerStyle=function(child,_,width){let paddingTop=arguments.length>3&&arguments[3]!==undefined?arguments[3]:22;let fontSize=arguments.length>4&&arguments[4]!==undefined?arguments[4]:\"15px\";child.style.backgroundImage=\"\";child.style.backgroundColor=\"#FF3131\";// Kırmızı iç daire\nchild.style.border=\"4px solid #FF3131\";// Beyaz ring\nchild.style.boxSizing=\"border-box\";child.style.borderRadius=\"50%\";child.style.width=\"\".concat(width,\"px\");child.style.height=\"\".concat(width,\"px\");child.style.display=\"flex\";child.style.alignItems=\"center\";child.style.justifyContent=\"center\";child.style.padding=\"0\";child.style.paddingTop=\"0\";child.style.fontSize=fontSize;child.style.color=\"white\";child.style.fontWeight=\"bold\";};return/*#__PURE__*/_jsxs(\"div\",{className:\"map-wrap\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"info\",className:\"w-60 left-2 h-8  text-white inter-light mt-1 fixed z-20\"}),/*#__PURE__*/_jsx(\"div\",{ref:mapContainer,className:\"map\"})]});}","map":{"version":3,"names":["React","useRef","useEffect","useState","maptilersdk","axios","geojson","jsx","_jsx","jsxs","_jsxs","Map","quak","setQuak","markers","setMarkers","fetchData","response","get","data","error","console","mapContainer","ist","lng","lat","zoom","config","apiKey","map","container","current","style","center","newMarkers","marker","document","createElement","display","justifyContent","alignItems","position","minSize","maxSize","minMag","maxMag","mag","Math","max","min","magnitude","ringSize","ringThickness","circleSize","ring","width","concat","height","border","borderRadius","boxSizing","background","circle","top","left","transform","color","fontWeight","fontFamily","fontSize","textContent","addEventListener","getElementById","innerHTML","city","depth","appendChild","newMarker","Marker","element","setLngLat","coordinates","split","addTo","remove","setMarkerStyle","child","_","paddingTop","arguments","length","undefined","backgroundImage","backgroundColor","padding","className","children","id","ref"],"sources":["C:/Users/bain/Desktop/Quakify-main/quakifyapp/src/components/Map.jsx"],"sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\nimport * as maptilersdk from \"@maptiler/sdk\";\nimport \"@maptiler/sdk/dist/maptiler-sdk.css\";\nimport \"./map.css\";\nimport axios from 'axios';\nimport geojson from './quakes.json';\n\nexport default function Map() {\n  const [quak, setQuak] = useState([]);\n  const [markers, setMarkers] = useState([]);\n  \n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await axios.get('https://quakify.mcskn.com/backend/api.php');\n        setQuak(response.data);\n      } catch (error) {\n        console.error('Error fetching data:', error);\n      }\n    };\n    fetchData();\n  }, []);\n  \n  const mapContainer = useRef(null);  \n  const ist = { lng: 28.97709, lat: 41.011467 };\n  const [zoom] = useState(1.5);\n\n  maptilersdk.config.apiKey = \"MTCoW3CI3wRY7K9lPnAI\";\n\n  useEffect(() => {\n    const map = new maptilersdk.Map({\n      container: mapContainer.current,\n      style: \"https://api.maptiler.com/maps/b89836a1-3239-4824-bf17-5aef32dc5664/style.json?key=MTCoW3CI3wRY7K9lPnAI\",\n      center: [ist.lng, ist.lat],\n      zoom: zoom,\n    });\n    \n    const newMarkers = quak.map(marker => {\n      // Kapsayıcı div\n      const container = document.createElement(\"div\");\n      container.style.display = \"flex\";\n      container.style.justifyContent = \"center\";\n      container.style.alignItems = \"center\";\n      container.style.position = \"relative\";\n\n      // Dinamik boyutlar\n      const minSize = 20;\n      const maxSize = 65;\n      const minMag = 3;\n      const maxMag = 8;\n      const mag = Math.max(minMag, Math.min(marker.magnitude, maxMag));\n      const ringSize = minSize + ((mag - minMag) / (maxMag - minMag)) * (maxSize - minSize);\n      const ringThickness = (Math.max(4, ringSize * 0.18)) -1; // Halkanın kalınlığı\n      const circleSize = (ringSize - ringThickness * 2) -1;\n\n      // Ring (dış halka)\n      const ring = document.createElement(\"div\");\n      ring.style.width = `${ringSize}px`;\n      ring.style.height = `${ringSize}px`;\n      ring.style.border = `${ringThickness}px solid #fff`;\n      ring.style.borderRadius = \"50%\";\n      ring.style.position = \"relative\";\n      ring.style.display = \"flex\";\n      ring.style.justifyContent = \"center\";\n      ring.style.alignItems = \"center\";\n      ring.style.boxSizing = \"border-box\";\n      ring.style.background = \"transparent\";\n\n      // Circle (iç kırmızı daire)\n      const circle = document.createElement(\"div\");\n      circle.style.width = `${circleSize}px`;\n      circle.style.height = `${circleSize}px`;\n      circle.style.background = \"#FF3131\";\n      circle.style.borderRadius = \"50%\";\n      circle.style.position = \"absolute\";\n      circle.style.top = \"50%\";\n      circle.style.left = \"50%\";\n      circle.style.transform = \"translate(-50%, -50%)\";\n      circle.style.display = \"flex\";\n      circle.style.justifyContent = \"center\";\n      circle.style.alignItems = \"center\";\n      circle.style.color = \"white\";\n      circle.style.fontWeight = \"bold\";\n      circle.style.fontFamily = \"inter\";\n      circle.style.fontSize = `${Math.max(10, circleSize * 0.4)}px`;\n      circle.textContent = marker.magnitude;\n\n      // Hover eventleri circle'a ekle\n      circle.addEventListener(\"mouseover\", function () {\n        document.getElementById(\"info\").innerHTML =\n          marker.city +\n          \"        \" +\n          marker.magnitude +\n          \"   /   \" +\n          marker.depth +\n          \"km\";\n      });\n      circle.addEventListener(\"mouseleave\", function () {\n        document.getElementById(\"info\").innerHTML = \"\";\n      });\n\n      // Yapıyı birleştir\n      ring.appendChild(circle);\n      container.appendChild(ring);\n\n      const newMarker = new maptilersdk.Marker({ element: container })\n        .setLngLat(marker.coordinates.split(\",\"))\n        .addTo(map);\n\n      return newMarker;\n    });\n\n    setMarkers(newMarkers);\n\n    return () => {\n      map.remove(); \n    };\n  }, [ist.lng, ist.lat, zoom, quak]);\n\n  const setMarkerStyle = (child, _, width, paddingTop = 22, fontSize = \"15px\") => {\n    child.style.backgroundImage = \"\";\n    child.style.backgroundColor = \"#FF3131\"; // Kırmızı iç daire\n    child.style.border = \"4px solid #FF3131\";   // Beyaz ring\n    child.style.boxSizing = \"border-box\";\n    child.style.borderRadius = \"50%\";\n    child.style.width = `${width}px`;\n    child.style.height = `${width}px`;\n    child.style.display = \"flex\";\n    child.style.alignItems = \"center\";\n    child.style.justifyContent = \"center\";\n    child.style.padding = \"0\";\n    child.style.paddingTop = \"0\";\n    child.style.fontSize = fontSize;\n    child.style.color = \"white\";\n    child.style.fontWeight = \"bold\";\n  };\n\n  return (\n    <div className=\"map-wrap\">\n      <div id=\"info\" className=\"w-60 left-2 h-8  text-white inter-light mt-1 fixed z-20\"></div>\n      <div ref={mapContainer} className=\"map\" />\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}